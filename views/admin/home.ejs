<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <%- include('css') %>
  <% path='redirect'%>
</head>

<body>
    <div class="container-scroller">
        <!-- partial:partials/_sidebar.html -->
        <%- include('siderbar') %>
        <!-- partial -->
        <%- include('header') %>
        <!-- partial body -->
        <%- include('body') %>
        <!-- container-scroller -->
        <!-- plugins:js -->
        <%- include('script') %>
        <!-- End custom js for this page -->
        
        <!-- Socket.IO Client -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            // Connect to Socket.IO server
            const socket = io();
            
            // Listen for new orders
            socket.on('newOrder', function(orderData) {
                console.log('New order received:', orderData);
                
                // Show notification
                showNotification('New Order Received!', `Customer: ${orderData.customerName} - Total: ${orderData.totalMoney} VND`);
            });
            
            // Function to show notification
            function showNotification(title, message) {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = 'alert alert-success alert-dismissible fade show';
                notification.style.position = 'fixed';
                notification.style.top = '20px';
                notification.style.right = '20px';
                notification.style.zIndex = '9999';
                notification.style.minWidth = '300px';
                notification.innerHTML = `
                    <strong>${title}</strong><br>
                    ${message}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                `;
                
                // Add to page
                document.body.appendChild(notification);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 5000);
                
                // Handle close button
                notification.querySelector('.close').addEventListener('click', function() {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                });
            }
        </script>
    </div>
</body>

</html>